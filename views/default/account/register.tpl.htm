<?php TPL::output('global/header_landing.tpl.htm'); ?><script type="text/javascript">	$(document).ready(function () {		$('#header_action').append('<?php _e('注册新用户'); ?>');	});</script><div class="aw-register-box">	<form class="aw-register-form" action="account/ajax/register_process/" method="post" id="register_form">		<?php if ($this->icode) { ?><input type="hidden" name="icode" id="icode" value="<?php echo $this->icode; ?>" /><?php } ?>		<?php if ($this->return_url) { ?><input type="hidden" name="return_url" value="<?php echo $this->return_url; ?>" /><?php } ?>		<?php if ($this->fromuid AND $_GET['invite_question_id']) { ?>		  	<input type="hidden" name="invite_question_id" value="<?php echo htmlspecialchars($_GET['invite_question_id']); ?>"/> 		<?php } ?>		<ul>			<li class="alert alert-danger hide error_message">				<i class="fa fa-times"></i> <em></em>			</li>			<li>				<input class="aw-register-name form-control" type="text" name="user_name" placeholder="<?php _e('用户名'); ?>" tips="<?php _e('请输入一个 2-14 位的用户名');?>" errortips="<?php _e('用户名长度不符合');?>" value="" />			</li>			<li>				<input class="aw-register-email form-control" type="text" placeholder="<?php _e('邮箱'); ?>" name="email" tips="<?php _e('请输入你常用的电子邮箱作为你的账号'); ?>" value="<?php echo htmlspecialchars($_GET['email']); ?>" errortips="<?php _e('邮箱格式不正确'); ?>" />			</li>			<li>				<input class="aw-register-pwd form-control" type="password" name="password" placeholder="密码" tips="<?php _e('请输入 6-16 个字符,区分大小写'); ?>" errortips="<?php _e('密码不符合规则'); ?>" />			</li>		  <li>		  <div>			     <input type="text" name="school_name" id="school-name" value="请选择大学" onclick="pop()">	                   <div id="choose-box-wrapper">	                        <div id="choose-box">		                    <div id="choose-box-title">			                        <span>选择学校</span>		                    </div>		                    <div id="choose-a-province">		                    </div>		                    <div id="choose-a-school">		                    </div>		                    <div id="choose-box-bottom">			              <input type="botton" onclick="hide()" value="关闭" />		                    </div>	                             </div>	                        </div>	          </div>		  </li>		<li>			 <input class="aw-register-name form-control" type="text" placeholder="<?php _e('专业名称'); ?>" name="major_name" tips="<?php _e('请输入您的专业'); ?>" value="<?php echo htmlspecialchars($_GET['major_name']); ?>" />		</li>		<!--			<li class="more-information hide">				<ul>					<li>						<?php _e('性别'); ?>:						<label>							<input name="sex" id="sex" value="1" type="radio" /> <?php _e('男'); ?>						</label>&nbsp; 						<label>							<input name="sex" id="sex" value="2" type="radio" /> <?php _e('女'); ?> </label>&nbsp; 						<label>							<input name="sex" id="sex" value="3" type="radio" checked="checked" /> <?php _e('保密'); ?>						</label> 					</li>												<li>				          <input class="aw-register-name form-control" type="text" placeholder="<?php _e('学校名称'); ?>" name="school_name" tips="<?php _e('请输入您所在的学校'); ?>" value="<?php echo htmlspecialchars($_GET['school_name']); ?>" />			             </li>			            <li>				           <input class="aw-register-name form-control" type="text" placeholder="<?php _e('专业名称'); ?>" name="major_name" tips="<?php _e('请输入您的专业'); ?>" value="<?php echo htmlspecialchars($_GET['major_name']); ?>" />			            </li>			           			            <li>				          <input class="aw-register-name form-control" type="text" placeholder="<?php _e('目标学校名称'); ?>" name="dst_schoole_name" tips="<?php _e('请输入您想报考的学校'); ?>" value="<?php echo htmlspecialchars($_GET['dst_schoole_name']); ?>" />			             </li>			            <li>				           <input class="aw-register-name form-control" type="text" placeholder="<?php _e('目标专业名称'); ?>" name="dst_major_name" tips="<?php _e('请输入您想报考的专业'); ?>" value="<?php echo htmlspecialchars($_GET['dst_major_name']); ?>" />			            </li>			            					<li>						<?php _e('角色'); ?>:						<select name="job_id">							<option value="">--</option>							<?php echo H::display_options($this->job_list); ?>						</select>					</li>					<li>						<?php _e('所在城市'); ?>:						<select name="province" class="select_area" style="display:inline-block"></select>												<select name="city" class="select_area"></select>					</li>					<li>						<input type="text" class="form-control" placeholder="<?php _e('一句话介绍'); ?>" id="welcome_signature" value="<?php if ($this->user_info['signature']) { echo $this->user_info['signature']; } ?>" name="signature" />					</li>				</ul>			</li>			<li>				<a class="btn btn-default btn-block more-information-btn"><?php _e('更多资料'); ?> <i class="fa fa-chevron-down"></i></a>			</li>			-->			<?php if (get_setting('register_seccode') == 'Y') { ?>			<li class="aw-register-verify">				<img class="pull-right" id="captcha" onclick="this.src = G_BASE_URL + '/account/captcha/' + Math.floor(Math.random() * 10000);" src="">								<input type="text" class="form-control" name="seccode_verify" placeholder="<?php _e('验证码'); ?>" tips="<?php _e('验证码不区分大小写,点击图片可换一张'); ?>" />			</li>			<?php } ?>			<li class="last">				<label><input type="checkbox" checked="checked" value="agree" name="agreement_chk" /> <?php _e('我同意'); ?></label> <a href="javascript:;" onclick="$('.aw-regiter-agreement').show();"><?php _e('用户协议'); ?></a>				<a href="account/login/" class="pull-right">已有账号?</a>				<div class="aw-regiter-agreement hide">					<div class="aw-register-agreement-txt" id="register_agreement"></div>				</div>							</li>			<li class="clearfix">				<button class="pull-right btn btn-large btn-success" onclick="ajax_post($('#register_form'), _error_message_form_processer); return false;"><?php _e('注册'); ?></button>			</li>		</ul>	</form></div><script type="text/javascript">$(document).ready(function (){	$.get(G_BASE_URL + '/account/ajax/register_agreement/', function (result) { $('#register_agreement').html(result.err); }, 'json');	$('.more-information-btn').click(function()	{		if ($('.more-information').is(':visible'))		{			$('.more-information').slideUp();			$(this).find('i').removeClass('fa-chevron-up');			$(this).find('i').addClass('fa-chevron-down');		}		else		{			$('.more-information').slideDown();			$(this).find('i').removeClass('fa-chevron-down');			$(this).find('i').addClass('fa-chevron-up');		}	});	    verify_register_form('#register_form');    /* 注册页面验证 */	function verify_register_form(element)	{	    $(element).find('[type=text], [type=password]').on({	        focus : function()	        {	            if (typeof $(this).attr('tips') != 'undefined' && $(this).attr('tips') != '')	            {	                $(this).parent().append('<span class="aw-reg-tips">' + $(this).attr('tips') + '</span>');	            }	        },	        blur : function()	        {	        	if ($(this).attr('tips') != '')	        	{	        		switch ($(this).attr('name'))		            {		                case 'user_name' : 		                    var _this = $(this);		                    $(this).parent().find('.aw-reg-tips').detach();		                    if ($(this).val().length >= 0 && $(this).val().length < 2)		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');		                        return;		                    }		                    if ($(this).val().length > 17)		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');		                        return;		                    }		                    else		                    {		                        $.get(G_BASE_URL + '/account/ajax/check_username/username' + '-' + encodeURIComponent($(this).val()), function (result)		                        {		                            if (result.errno == -1)		                            {		                                _this.parent().find('.aw-reg-tips').detach();		                                _this.parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + result.err + '</span>');		                            }		                            else		                            {		                                _this.parent().find('.aw-reg-tips').detach();		                                _this.parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');		                            }		                        }, 'json');		                    }		                    return;		                case 'email' : 		                    $(this).parent().find('.aw-reg-tips').detach();		                    var emailreg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;		                    if (!emailreg.test($(this).val()))		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');		                        return;		                    }		                    else		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');		                    }        		                    return;		                case 'password' :		                    $(this).parent().find('.aw-reg-tips').detach();		                    if ($(this).val().length >= 0 && $(this).val().length < 6)		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');		                        return;		                    }		                    if ($(this).val().length > 17)		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');		                        return;		                    }		                    else		                    {		                        $(this).parent().find('.aw-reg-tips').detach();		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');		                    }		                    return;		            }	        	}	            	        }	    });	}		$('.select_area').LocationSelect({        labels: ["<?php _e('请选择省份或直辖市'); ?>", "<?php _e('请选择城市'); ?>"],        elements: document.getElementsByTagName("select"),        detector: function () {            this.select(["<?php echo $this->user_info['province']; ?>", "<?php echo $this->user_info['city']; ?>"]);        },		dataUrl: G_BASE_URL + '/account/ajax/areas_json_data/'    });});</script><script type="text/javascript" src="<?php echo G_STATIC_URL; ?>/js/jquery.js"></script><script type="text/javascript" src="<?php echo G_STATIC_URL; ?>/js/school.js"></script>    <script type="text/javascript">	//弹出窗口	function pop(){		//将窗口居中		makeCenter();		//初始化省份列表		initProvince();		//默认情况下, 给第一个省份添加choosen样式		$('[province-id="1"]').addClass('choosen');		//初始化大学列表		initSchool(1);	}	//隐藏窗口	function hide()	{		$('#choose-box-wrapper').css("display","none");	}	function initProvince()	{		//原先的省份列表清空		$('#choose-a-province').html('');		for(i=0;i<schoolList.length;i++)		{			$('#choose-a-province').append('<a class="province-item" province-id="'+schoolList[i].id+'">'+schoolList[i].name+'</a>');		}		//添加省份列表项的click事件		$('.province-item').bind('click', function(){				var item=$(this);				var province = item.attr('province-id');				var choosenItem = item.parent().find('.choosen');				if(choosenItem)					$(choosenItem).removeClass('choosen');				item.addClass('choosen');				//更新大学列表				initSchool(province);			}		);	}	function initSchool(provinceID)	{		//原先的学校列表清空		$('#choose-a-school').html('');		var schools = schoolList[provinceID-1].school;		for(i=0;i<schools.length;i++)		{			$('#choose-a-school').append('<a class="school-item" school-id="'+schools[i].id+'">'+schools[i].name+'</a>');		}		//添加大学列表项的click事件		$('.school-item').bind('click', function(){				var item=$(this);				var school = item.attr('school-id');				//更新选择大学文本框中的值				$('#school-name').val(item.text());				//关闭弹窗				hide();			}		);	}	function makeCenter()	{		$('#choose-box-wrapper').css("display","block");		$('#choose-box-wrapper').css("position","relative");		//$('#choose-box-wrapper').css("top", Math.max(0, (($(window).height() - $('#choose-box-wrapper').outerHeight()) / 2) + $(window).scrollTop()) + "px");		//$('#choose-box-wrapper').css("left", Math.max(0, (($(window).width() - $('#choose-box-wrapper').outerWidth()) / 2) + $(window).scrollLeft()) + "px");	}  </script>	  <style type="text/css">	#choose-box-wrapper{		width: 652px;		background-color:#000;		filter:alpha(opacity=50);		background-color: rgba(0, 0, 0, 0.5);		padding:10px;		border-radius:5px;		display:none;	}	#choose-box{		border: 1px solid #005EAC;		width:650px;		background-color:white;	}	#choose-box-title{		background:#3777BC;		color: white;		padding: 4px 10px 5px;		font-size: 14px;		font-weight: 700;		margin: 0;	}	#choose-box-title span{		font-family: Tahoma, Verdana, STHeiTi, simsun, sans-serif;	}	#choose-a-province, #choose-a-school{		margin:5px 8px 10px 8px;		border: 1px solid #C3C3C3;	}	#choose-a-province a{		display:inline-block;		height: 18px;		line-height: 18px;		color:#005EAC;		text-decoration: none;		font-size: 9pt;		font-family: Tahoma, Verdana, STHeiTi, simsun, sans-serif;		margin:2px 5px;		padding: 1px;		text-align: center;	}	#choose-a-province a:hover{		text-decoration:underline;		cursor:pointer;	}	#choose-a-province .choosen{		background-color: #005EAC;		color:white;	}		#choose-a-school{		overflow-x: hidden;		overflow-y: auto;		height: 200px;	}	#choose-a-school a{		height: 18px;		line-height: 18px;		color:#005EAC;		text-decoration: none;		font-size: 9pt;		font-family: Tahoma, Verdana, STHeiTi, simsun, sans-serif;		float: left;		width: 160px;		margin: 4px 12px;		padding-left:10px;	   	}	#choose-a-school a:hover{		background-color:#005EAC;		color:white;		cursor:pointer;	}		#choose-box-bottom{		background: #F0F5F8;		padding: 8px;		text-align: right;		border-top: 1px solid #CCC;		height:40px;	}	#choose-box-bottom input{		vertical-align: middle;		text-align: center;		background-color:#005EAC;		color:white;		border-top: 1px solid #B8D4E8;		border-left: 1px solid #B8D4E8;		border-right: 1px solid #114680;		border-bottom: 1px solid #114680;		cursor: pointer;		width: 60px;		height: 25px;		margin-top: 6px;		margin-right: 6px;	}  </style>  <?php TPL::output('global/footer.tpl.htm'); ?>